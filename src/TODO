--------------------------------------------------------------------------
TODO

implement different elements for
    generated entities should have elements
    same for spells

start thinking about level progression
    first level should have mostly just physical enemies
    later levels should become more varied

friendly mobs which attack other mobs
    other mobs should attack them as well?


--------------------------------------------------------------------------
DONE


--------------------------------------------------------------------------
BUGS


--------------------------------------------------------------------------
IDEAS

cells with effects
    poison - works like bloodborne, but full damage instantly at completion of meter, meter invisible, in effect allows for constant accumulation of poison in realtime which periodically "ticks"
    straight damage when stepping on for the first time (lava)

doors opened with buttons
    can make rooms be one-way entrance by putting a button and a door at the entrance
    (one way entrance poison room)

merchant block entrance to shop storage which contains a chest
    could attack merchant to open the way and get the chest but merchant is deadly

crab-hand
    crabs can be attacked but also can be used to gain +X to dmg for a limited time while taking damage periodically
    this is an aura
    crab disappears on end

pushable blocks ala sokoban
    use blocks to push a button to open a door
    but block is surround by enemies, need to clear them to be able to push it
    pushed by moving next to block
    can grab block for undoing purposes by holding G

locked doors that need keys(key spawned randomly in world a bit far away from door)

long-range attack for entities
    attacks player if no LOS(i.e. player can see it)

elements system
    fire, lightning, shadow(maybe something else too)
    each dmg bonus and stuff is one of those
    regular dmg is melee
    mobs can be resistant to some elements, including melee
        ex: a mob that can only be defeated with shadow
    dmg bonus spells for same element don't stack
        +2fire dmg followed by +4fire dmg = +4fire dmg
        limits the max amount of bonus you can get
        have to use multiple elements if you want to go crazy

make levels
    the world could be a tower

elemental affinity
    using an element, whether for attack/buff whatever else increases it's power
    every N uses you get a message "your fire affinity increased, fire spells are now more powerful"
    affinity level up improves one affinity but makes the opposite element worse
    fire <-> lightning
    shadow <-> light
    could make it so that increase is bigger than decrease

spell that buffs entities
    increase random entity's health and attack
    increase all entity's health but also drop amount

increase effect of element in general
    increase light = higher light dmg, higher light heal amount, etc.(higher light dmg taken?)
    decrease light = lower light dmg, lower light heal, lower light dmg taken

special effects
increase movespeed
increase copper droprate
increase item droprate
resistant to elements/ailments
invisibility, enemies can't chase you
increase armor by a factor
cure poison
extra life, restore full hp once when dying
swap stats with enemy
    health, attacks, defenses
armor scale mod
armor flat mod
absorb mod

spell notes
    combat related bonuses should either be everyattack or everyturn but last long enough
    attack bonus that lasts 1 turn is useless
    temporary max health mod should have one tick only which lasts for N turns/attacks

entity editor in-game
    edit/add/remove all components

mod equipment stat
    mod attack doesn't cover all options, it modifies natural attack only
    mod attack of weapon would only modify the weapon which presents an interesting choice of whether to enchant weapon now to get power now or save it for later to enchant a more powerful item

    mod attack should affect a specific element
    ex: enchant weapon with ice -> +1 ice attack

    could make it general: enchant equipment's ice power:
    increases attack or defense

    enchanting works like this:
        use the enchant item => set enchant flag
        if enchant flag => add "enchant" option in interact

    enchanting items/rings?
        could be fun

    two types of enchant:
        one that adds element power even if it's 0
        other that only increases existing element
            so enchanting ice on a sword with 1 phys dmg will do nothing 


make defense translate to absorb like this:
    82 defense = absorb 8 dmg always, 20% chance to absorb 9 dmg


can defense be negative?
    keep positive for now but should consider
    could work as a penalty for specializing too much into one element
        though on the other hand this might penalize it too hard

ranged attacks
    entities can attack if 2-3-4 away from player

other move types
    keep distance
        entity does nothing but when player to entity distance is lower than X it tries to get away
    chase and keep distance
        for entities with ranged attacks, they will chase player until reaching attack distance then try to keep distance

vary room geometry
    cut off walls around edges(keep connections)
    add walls inside rooms

dropping/equipping decrements spell counters
    not sure if good but i think i still do want item interactions to take a turn

make spell_effect_text() for what to print
    make a distinction between positive and negative values
    modhealth+1 = heal for 1
    modhealth-1 = damage by 1(damage? idk something else)

mob that heals itself over time
    new kind of spell ModEntityHealth?

make entities have defense instead of absorb because right now it's inconsistent with what the player sees, better for it to be same to be more easily understandble

attacking always takes prio, might need to disable attack while interact menu is up

html5 target draws text at incorrect locations
    might be related to the "pixel perfect" setting that's passed to haxegon

browsers need hardware acceleration apparently, need to put a note on game site

find a good font, that doesn't have scaling or offset problems

scrolling for spell display, at some point spells won't fit in current area

figure out copper drop amount

entities should sometimes drop locked chests
    other entities drop the key once chest is down

weapons buffs   
    base attack buffs
    physical or physical + element or only element(rare)
    single element weapons have "of Element" in name
    or all elements("of Radiance")
    +
    extra buffs for higher level weapons
    or even use

potion that has two spells
    one helpful that's better than usual
    one unhelpful to offset

boss mobs
    guaranteed powerful item drop
    big health pool

SPELL identify
    probably only for specific items/buffs
    potions should not need to be identified
    special scrolls with complicated spell effects might be a good candidate
    or armor's use non-standard spells  
        +defense/attack is fine
        extra stuff can require identification
    identified with a spell from a scroll or in-world entity

SPELL decrease stat of everything on level
    includes all entities, items, equipment, in world or carried
    also all future items dropped/spawned on this level
    something like -1 to light attack might be good
        imagine you get to a level with a bunch of light mobs
        then you can use this spell to make it easier to clear
        but this will also decrease usefulness of your light weapon for example
    increase is fun too
        increase all attack makes item drops more valuable but everything also hits harder

scroll items
    contain mostly special effects

enemy chest
    just a regular enemy with 100% droprate

color enemies according to their strongest element

spell to show locked things on map
    and/or keys?

different attack pattern weapons
    spear = damage everything 2-3 in front of you
    axe = damage everything around you
    whip = cleave, jumps from one entity to another(no branches)
    offset by less dmg on single target

start with 5 charge heal potion?
    be able to select starting item

picking up and dropping friendly enemy is like pokemon
    pick up an enemy like that and drop it and let it fight other enemies for you

summon friendly enemy spell

portals
    two-way, connected to specific locations
    port via interact menu?

locked doors
    need to spawn them and matching keys such that it's possible to unlock
    (don't lock the key behind the door)

aoe damage spell
    radius around player
    or the whole room

modhealth everyattack
    something like leech

summon friendly mobs spell
    moving or stationary

show whether mob is friendly or aggressive in tooltip
    disallow attacking friendly mobs so that player is more likely to check that he can interact and pick it up

reign of shadow spell
    remove everything with light element from the level, entities drop items when removed
    includes player items/equipment?

copy scroll spell
    probably on another scroll
    copies another scroll exactly

add use charges spell
    probably very rare, because can be extremely powerful

swap defense spell should
    give mob's natural defense to player
    but give natural+mods defense of player to mob

decrease attack of EVERYTHING on the level(includes player's stuff)

